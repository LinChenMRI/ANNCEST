function [Y,Xf,Af] = HL_B0_NN_Input50_Layer7_B0_20181001162342(X,~,~)
%HL_B0_NN_INPUT50_LAYER7_B0_20181001162342 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 01-Oct-2018 16:34:46.
% 
% [Y] = HL_B0_NN_Input50_Layer7_B0_20181001162342(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 50xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0.312578413345633;0.331122425629492;0.350518783925186;0.368779782482581;0.386792199749572;0.403063701547987;0.414982800812954;0.435129748919273;0.452721363057851;0.466051600729621;0.478881199141708;0.492930400437971;0.502732397146619;0.51771747082046;0.528562523515776;0.539916339355212;0.549075954807048;0.554924243585715;0.567082609536526;0.575261107181023;0.584819332663433;0.589980874316619;0.597616588454127;0.602832400139182;0.607547050101927;0.61421253883403;0.61390870668204;0.619684040803205;0.625765004757198;0.625405662492479;0.634052067145427;0.636630254770855;0.638140449284084;0.64857449526252;0.657892103525574;0.664346855575523;0.672126244070513;0.680367170578539;0.68909512923845;0.695977638525376;0.702545167060182;0.705659035182697;0.715238405017895;0.720716818692406;0.726019974455743;0.729764999511853;0.735673955542057;0.738532234458528;0.74370420301511;0.746921657942642];
x1_step1.gain = [5.39060088379058;5.53614848297394;5.66354056570803;5.7727094091997;5.94142497173295;6.08065679985598;6.13036042139224;6.43185441407345;6.61644280593851;6.78786190836027;6.97736854023452;7.18657417573246;7.28792123849211;7.55512802691745;7.74350136106635;7.84556128830703;8.016909250741;8.10366918806582;8.35014963590612;8.49835706870634;8.71025363080748;8.82077641763058;8.94388892857632;9.03024573767654;9.13757417980138;9.19805049587507;9.00669336710598;9.23063149064435;9.36839869645563;9.17914469060954;9.45761260241175;9.48882846911945;9.43986545628059;9.66981283876492;10.0291942468612;10.3359824099274;10.6856036609555;10.9571986183649;11.3384493624709;11.7064678784945;12.0676179815921;12.1399095704512;12.6860270288791;13.0140183237073;13.4132522486522;13.7005021521145;14.0750801313339;14.152403402949;14.6237480379684;14.7231755457827];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.72124340772003203703;0.0092632919515669136928;-0.60653672584375895038;-0.02138886313178784554;-0.66733092616196154623;-0.048457143532277750786;-0.066231166176731942619];
IW1_1 = [-0.090950397405452410027 -0.084274405261294441094 -0.068071170225791483022 -0.076749033307760880507 -0.054061661154361013992 -0.071439251022942906744 -0.056406831667595073998 -0.057624180350522934135 -0.020776263850821114626 -0.035698301385911790362 -0.044132322099325840825 -0.04045008761505343442 -0.030729818155142637343 -0.050114766835272668566 -0.066272922365780889686 -0.034478136633377884368 -0.048624769604945050627 -0.082455654953870624602 -0.027937074997010549748 -0.018383146550328348379 -0.042280410866530358793 -0.0059800479672313753415 0.0081890846378596584415 0.028450715172427080979 -0.0072484451985200580929 0.047145524909156466542 0.035025288547751450008 -0.0040685270283762620114 0.010453520199144600983 0.0013699296260449890517 0.0098224476608648816911 -0.028581349230680515305 -0.076533183123232706446 -0.09490938477858375244 -0.10259119043483559686 -0.13382459337802682375 -0.10121151069237503684 -0.0956030792587629491 -0.073830033140995607321 -0.051589848290199219472 -0.035742688683953353912 -0.01243672251666893061 0.030186372521529607205 0.045268571653751213391 0.063991394778002530508 0.096374697178719423429 0.11018602537122318408 0.11571168449435843828 0.13690612174974978177 0.13204361340427978044;0.21981094162857617302 0.19160594475104641976 0.14063419341604771473 0.12438933605611619815 0.095524184219133889684 0.089149886667146349684 0.046642735401734941592 0.032450401955925738118 0.023476803256460856972 -0.013030174743653231278 -0.0085875273077909465569 -0.011903428324962959939 -0.012440263134507108592 -0.025574884118362711111 -0.025992942099608517398 -0.034358289049273557647 -0.028385503435290785484 -0.028772047219010443708 0.0093721651878635875432 0.0061380916738891970821 0.0014504582005498737555 0.018197385633468610849 0.010603101161226162821 0.015721009824730416971 0.0047911244867996864022 -0.014358062715823764408 -0.012616479434243748486 0.010784966575869249852 0.0053191733279326800996 0.012215741431379103024 0.014689563140391773827 0.014725338691970400393 0.036673641146957342007 0.022841607155459450751 0.0099553417911928433759 0.0099309325163533766767 0.0012063932319696618438 0.0088690023564976048359 -0.04197452495601106115 -0.013184440959922003392 -0.051809307348799897575 -0.064671009692871150865 -0.066218260384117128003 -0.049732992306465571841 -0.077664266498184003629 -0.073335692958769294059 -0.066176524348458401481 -0.086698783709281995735 -0.10253457036684592019 -0.087436014066660211475;0.53945329643272099673 0.46262921052079314377 0.39189920816509693502 0.31515293133962568595 0.26732046725446007018 0.2099472710435740519 0.18129578514287206237 0.12522242825378243625 0.078223140514485409169 0.058124383949393523818 0.029978813215892619742 -0.026729359757549274457 -0.040638302468215141416 -0.067125135864285506715 -0.11409831378272733415 -0.12151104003349917637 -0.11219384320952038858 -0.14999280503106418583 -0.12016227720152050651 -0.085522082779413213793 -0.057139827420755469334 0.0046980978053711075146 0.043267318089720015195 0.047629871464136552817 0.077141728448595889289 0.087641908042562860492 0.072910946497359296892 0.038387853549501249617 0.045059625070627759569 0.015218549637838833452 0.0099576421876493535768 -0.040144385939852471334 -0.096572610653862300811 -0.12812726234342280973 -0.13524235071118448359 -0.1684442312595550717 -0.16739312219532900827 -0.17933420986488349258 -0.15005325284818291087 -0.13041211112821465834 -0.10655952283645381273 -0.10789677531374131103 -0.055624387012259753071 -0.066198672299273786379 -0.055901211149277367507 -0.053357625802727848274 -0.026178236463909609205 -0.0077527893069950547592 0.017336766167102057867 0.016629302902634382488;-0.21959613037996894569 -0.18721664426250606006 -0.14953027606295607455 -0.12257900104908754646 -0.12461387910420108904 -0.066360374175076453085 -0.087108805336717290424 -0.048485730044737537781 -0.038390013388384484905 -0.036851876236710191803 -0.020810446634275898969 0.0035210516811901189371 -0.016354104081198476278 0.017605884524540142688 0.0074726097896793738234 -0.0013563773253514287143 0.0039368110600374959379 -0.0020178673154137333375 -0.0071453105573555187116 0.0088493093225340581365 -0.0029600037557120477405 0.013786323402675770833 0.0012276742052541235895 -0.010549352536295587487 0.029827679651211219669 -0.0022639256495031079459 0.013067259974341506254 -0.0011851089746866970594 0.018613264936066013788 0.02854933749161323378 0.0091271958750549896794 -0.032273253139869131911 -0.043813262303272440534 -0.048790803331007208399 -0.051847113498146475685 -0.025070815524638339483 0.009070273584312005255 -0.0016005541569911374469 0.01741323411899211096 0.036876306984534514 0.075885285191053308829 0.045895627281684420185 0.077610477740219688259 0.083293201446650047548 0.085876437293695762065 0.097733767864787685076 0.10257488448161117267 0.11592653902675513489 0.11136851730069435851 0.13331741396892116125;-0.23119455166020524972 -0.20292532648709249443 -0.15234857779044869153 -0.1173225036210231581 -0.074808093160194849558 -0.039023640534057907336 -0.01616776990200589556 0.0096876668078924709632 0.02030288152190087847 0.046882184198640507178 0.034689749661428702365 0.012316438530256773251 0.054424244712316570405 0.032164384125418332694 0.016673550685790770182 0.021278317109848579602 0.028123828397084205816 0.0081888177640603264373 0.0091954009372531304162 0.021476180014003049684 0.027399447877137949464 0.029078244915632912859 0.016906907237333661936 -0.010056841975540541101 -0.023320854439870104119 -0.018879633733017247427 -0.051048222609975497932 -0.023417051885263676092 -0.037025097550023512716 -0.067604590931164859624 -0.03821554475560885733 -0.050296225706597773308 -0.05623097946630465499 -0.066627592752671341292 -0.052162270896852540314 -0.043584921955691038886 -0.052053795660607922458 -0.014447418480135029023 0.010745114569197517299 0.033711456633558484208 0.079662926548250606595 0.086234235530485189858 0.14145093920410567456 0.13954594670304587556 0.14703240874717143916 0.16105443350306947181 0.1862783062764150066 0.21662409786163078218 0.21712937648438321303 0.22452130904800401967;-0.0012223635570005660783 -0.020588093767535165651 -0.021099192616236335518 0.018173566858390732132 0.012617899447877962277 -0.0090517917677885584293 0.01767831364109749559 -0.0044301659755424434989 0.00088702856225262118918 0.004601550426253622067 0.011351401995181625154 0.0040064961240016917429 0.0050850257366529599476 -0.0083127851151490583098 -0.00074393680600368886774 0.0042309451649062308765 -0.0025601869201253664096 -0.01979363963238025409 -0.011586014962113056273 -0.048186893455492263438 -0.044442794008218523827 -0.049593227108492045352 -0.038533983891929968202 -0.012577460340172498185 -0.011450335901678737605 0.011292584696085959314 0.0024634311365939213709 0.015465476544511471205 0.035678644094680939114 0.034930046977642709161 0.032670826286882136136 0.009823099565998163335 0.029749897969631167866 0.019968010508133123698 0.011972671497365722226 0.00055174177653967199 -0.030084273103072853989 -0.033519508576869097571 -0.021430923734608187808 -0.018658733983140544932 -0.047928717606359201586 -0.034558832016476984106 -0.049870516446037925495 -0.040140783242608994719 -0.060604940349659852661 -0.053580590273565084636 -0.076584971665363973936 -0.098419523870807060217 -0.063599398779917465374 -0.069008644403686369984;-0.12610693438507233899 -0.10040183778283709448 -0.068412227871716801975 -0.079698573918427245699 -0.047378849555367814894 -0.029448360998776353104 -0.043511303905176525186 -0.020629260784328778966 0.002150268202224402906 0.010119997202916522494 -0.0039373512363296211958 0.00064603630049636922173 0.0064422246777135049739 0.01021433090154982154 -0.010780446070013533985 0.0035811443010336412376 0.00052286902166700220153 0.021625984472220628058 -0.025121008943436322347 -0.019982853294209564771 -0.018304987809546698768 0.011399581353295594813 -0.013759207026448595779 -0.015665469218331125323 0.010613205344541146169 -0.020523334911855133783 -0.021593423855221491325 0.00017454706199937511054 0.027430365978546703692 0.0064318547378154969363 0.0017889546622581278291 -0.011462217403795948306 -0.027269576449683658598 -0.029816111109733138551 -0.014386368796290164088 -0.025707649911895145284 -0.012291737874311290529 0.011608424646726872576 -0.0025771780869914850433 0.032418525549028631705 0.011902482347541478921 0.019574995804632344676 0.026328407236818916759 0.052734863886792354704 0.05781256444290978902 0.034622123185729589134 0.062382168895413668552 0.041130607737237048771 0.037786880737872945157 0.044142718312771320188];

% Layer 2
b2 = -0.12899005949965411388;
LW2_1 = [-0.60776854648225708821 0.46049307770530129025 1.0420988695323838424 -0.48067454636157086467 -0.65919860968538490642 -0.17237040268309750113 -0.26637905409940182411];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 4.00005675622833;
y1_step1.xoffset = -0.249997150082307;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
