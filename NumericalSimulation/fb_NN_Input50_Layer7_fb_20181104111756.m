function [Y,Xf,Af] = fb_NN_Input50_Layer7_fb_20181104111756(X,~,~)
%FB_NN_INPUT50_LAYER7_FB_20181104111756 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 04-Nov-2018 14:30:39.
% 
% [Y] = fb_NN_Input50_Layer7_fb_20181104111756(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 50xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0.0729247175037787;0.178282313189777;0.299244062513112;0.407549437895104;0.498709911335852;0.575275266770725;0.637313367605373;0.682006395937553;0.720640832639236;0.749694497434049;0.771880274617689;0.790322994288391;0.806569501273184;0.812398040017593;0.808926948516297;0.808383146811244;0.808774595076165;0.807743823189116;0.80773264355027;0.807302209298518;0.806508538105197;0.806949549517941;0.80851528601239;0.806632380774305;0.808476956076085;0.808468164324625;0.808549072013256;0.812030590837194;0.812383031992557;0.811291318059216;0.811814277579579;0.810189525104771;0.810840433473759;0.812117752868335;0.809862393141246;0.811696511949399;0.816707813826149;0.833854485825402;0.857196693039001;0.878378893003495;0.894983877891657;0.91005754356022;0.922166902912498;0.931633047908608;0.940750405781915;0.946993376813479;0.952202465514613;0.959059107552302;0.96430246032489;0.965902688028614];
x1_step1.gain = [2.32586672376029;2.61883265172443;3.07452566774418;3.64503507931867;4.32150725586184;5.14243268644615;6.03053487197486;6.92009684183233;7.955189583762;8.79448534501259;9.74802904578812;10.6672574483497;11.5239912668608;11.9874342700011;11.7012748934594;11.5761515035528;11.560879096601;11.4443210381669;11.3676156644139;11.2797920815681;11.2288583914825;11.2262650490042;11.3599656712744;11.2499461509573;11.3263853672431;11.2640955901356;11.3118734013535;11.4504379970897;11.3834805998145;11.1322539002797;11.0774354215607;10.931692743802;10.8903875540649;10.8798862040678;10.7623807268894;10.7755829675057;11.0166908975686;12.1376768902066;14.1714797915819;16.5520212861965;19.1675147134236;22.2894274321491;25.777047458364;28.8432862703376;33.3207024057174;37.4286641329833;41.3403350459133;46.8631905559151;54.1472727990131;54.5505417943901];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.141141158536993494;-0.0023007230764008385245;-0.23781645087759994972;-0.34822232581979400967;3.8069967867904974668;0.45562375673945088028;0.96744408801361680972];
IW1_1 = [-0.55984641852332084344 0.17206561422672297934 0.20744639668722730796 0.046682725829060495171 0.0094198683251711882308 -0.03272692231033181437 -0.074970447673610843276 -0.075362600935616710918 -0.06309043338682496227 -0.069184233043599260848 -0.048262341097992697558 -0.042435804603173539473 -0.032872009861553884436 -0.028672545085117757263 -0.049280458491921405595 -0.091671400237608405281 -0.1038286049625623958 -0.022787032637698916709 0.028202049911171544333 0.07866541034286314571 0.15350200033676006384 0.16089294255764716168 0.19918814743426171976 0.26737626356142601969 0.31374370897659825674 0.30536187488496346898 0.25909050719094067761 0.15315483804942359169 0.08273560492106074582 -0.049036047446608457823 -0.1866045615838875793 -0.26819966733863576103 -0.27471391072191181371 -0.25612489340302196927 -0.22248718526693395114 -0.17468234772194060622 -0.13603353077852065045 -0.021442230776700307859 0.042445168141932755612 0.071271119745957609015 0.05491776655548324948 0.046976265279945840503 0.032659941691978403022 0.029862222998770455995 0.01958996613012936594 0.0042706680440547590064 0.011322337271592991179 -0.0040367213053131125247 0.0030497245920748003965 0.0026659350912938166098;-0.064015823685544634425 0.17583518897300645656 0.11390230419060536071 0.010631679053773738716 -0.036678855065740985364 -0.029656129104133573116 -0.029808150412674167679 -0.036939888870987161451 0.015633337938778860826 0.013714796690562467904 0.021477280282862110106 0.029587497213750587471 0.04458242600212983936 0.046868151047473514959 0.063873750435159803995 0.085971771149811387902 0.1276065138299148638 0.14030886479935736344 0.13487895424548909662 0.10436294836680484743 0.059875957896120900192 0.017336531640888778322 -0.0040657599307368369468 -0.028727536171739634363 -0.024167857853535649332 -0.058919589974856190207 -0.084059475188117807609 -0.1005236260179519503 -0.13649394625402502812 -0.12032563750034051819 -0.13167856368387981236 -0.083991507907109380637 -0.03336221275012154347 0.023804930174059286269 0.077207700541003995709 0.073637038713700558867 0.057786602544310755603 0.024160024953787152119 0.0055286434609962045034 -0.014075124615122879337 -0.015059028899209968982 -0.011762485150119504976 -0.012856828904592975879 -0.010448648730578427232 -0.0090876688311678308768 -0.0060377178717976954028 -0.0062611532775049922803 -0.0081351865894426830111 -0.0058311489421955277346 -0.0046542635421890372199;0.055626088363970031814 0.10908295347017206434 0.052739012563372128506 -0.015833835307808179216 -0.038387935717864314633 -0.025785776933982894332 -0.022290590682752482038 -0.025732314114880715239 0.0092732795145112414947 0.011805369210703992033 0.019347401930341321524 0.025050166831486937041 0.037186138828784527643 0.041539183078635737167 0.059595699264158551178 0.079341863485916208631 0.10339571738920098898 0.097033729898469048281 0.083755463920622275076 0.060588760669419747251 0.025941150035684170522 0.0015597737813032549244 -0.014569531466929448379 -0.042313145263069035229 -0.050578712033450136387 -0.075221893466215841717 -0.085791785270091333593 -0.088377934598652604925 -0.1035070152064119231 -0.081400971851871326002 -0.069269414728728551101 -0.032518546640333233222 -0.00017567403802501885572 0.030004190472256560274 0.054520636764824596809 0.045519697743463448381 0.036136265061818384492 0.01037312108834223881 -0.0033324299944585107983 -0.019209534205804040807 -0.016316874147856340327 -0.016012653824263312075 -0.012143666903993368886 -0.011645988015081591704 -0.0096372981267911703163 -0.0045125265373599388746 -0.0059083314898293378542 -0.004806882761103757444 -0.0050278763734479675618 -0.0035133654551313007672;-1.0428745150947229536 0.80976214874993757142 0.63674166782087848748 0.37866962067512638379 -0.055783137800489455971 -0.13139931064657386917 -0.16416473358270289307 -0.13861789507663455079 0.089485619645485667273 0.057625200165738472979 0.051295835988490495749 0.086336685805069979249 0.15860260651981952784 0.12788332283406042555 0.20059593620099669398 0.30226237270812678082 0.45756525909125989049 0.4823286214505836389 0.46126555452691092585 0.25241391070965990551 0.022815751951211021842 -0.10560906595190737434 -0.17526244755300993128 -0.21844274788918663366 -0.089318850265986321491 -0.15674780003765714786 -0.18679060977348616035 -0.18508076587253285972 -0.36961041904028835159 -0.28820944144191090741 -0.40858526181108706377 -0.1987826081158020064 -0.079085017763680154346 0.11591136691660054725 0.33819787615204111031 0.357493948084398383 0.33056501707503299636 0.18284499046191965421 0.10382183385550255994 -0.0078211854715385317749 -0.046570712024561512765 -0.035760742978708896789 -0.054109687357676142239 -0.054166031764847785701 -0.040681769539582669781 -0.032307787150344276228 -0.033623485435342194416 -0.052592556013824703909 -0.031832762013598039919 -0.02512906686361834202;5.0066999343001885592 -0.043178439666165670252 -0.35436009128419326819 -0.41892676162969133546 -0.051111207412319052679 -0.011013909384232275016 0.0172640154043109742 -0.78531347567189757619 0.059896931598182767686 -0.13379908309026791735 0.64074957141048594078 1.6187725692464081106 1.8046442452340563101 -0.12598187999125340375 0.68575159153075293528 0.85443448855247972062 -1.4022842076520194432 -3.5590302884182984933 -0.74505863714313169677 -1.2787785957871993237 0.17546036746277005047 1.0882805707754668045 2.9736119979847095429 2.9696328456713065869 1.0692379728758785173 2.2685522650794891497 -1.2271247105750047179 -0.67889560702635531886 -1.0765197951123299802 0.23842641567390182589 1.8247009199272616886 1.438639455459504779 0.99056259221242681789 -0.32531397477599244272 -2.2899977956607524554 -2.1906082747888691031 -0.64326548556226714748 0.71054247086298893965 1.4278315830992398539 -0.9928453399993676376 -0.43519308439514126086 -2.3968935789116141422 1.5852347938416868622 -0.69592848797772255409 -1.4921261666498415455 0.12070199189915925553 -0.4417723991849208387 -0.070730171288214502279 -0.44527875506505676384 -0.17975649035884122551;-0.89188458955879401646 -0.55420605982634663089 -0.11890770355577125195 0.17524673604794693826 0.35737180273692331633 0.33794332202806748322 0.31148280885804485729 0.22794108371653298839 0.10932326775303224942 0.066644972807218677557 0.024334834094824134287 -0.013001187831347738033 -0.11895570620196516121 -0.17187599679186960078 -0.30615386328429727847 -0.39994140350910151183 -0.42481744910029806128 -0.28036995546819587499 -0.15780220890730051186 -0.078236320421445737505 0.058369464523224265373 0.071303537708402323081 0.13884126911360536449 0.27683126419579368038 0.29791132313526996755 0.30724853466946910885 0.19369658079070206647 0.12585900519937454067 0.16001991060300993497 0.074874678119793786069 -0.030141757901026907523 -0.16409898232232345006 -0.1908546732550711611 -0.20314473850700465185 -0.18899919406459692039 -0.14758777621301391592 -0.1514266592345699658 -0.060378608181713734615 -0.010892856598234088375 0.066030352798929589642 0.065854168604013177402 0.081449211799232687503 0.065425937581847892766 0.069996732634202765699 0.051103232863911295103 0.023098466859102193688 0.035684767185528341871 0.021851542669477808101 0.030129157898412139982 0.018793339763035665085;-0.48085778067751894227 -0.82169663796794145671 -0.40293610606733581969 -0.0090116237094587433448 0.29495910673673103597 0.3711053500427428653 0.38714361584975970354 0.3030851241406375407 0.18431729987632058942 0.19281040408414817922 0.1716386138970204811 0.14069484970328996476 0.026386458458128425608 -0.016366825447761780554 -0.11032551753653301041 -0.16836009805019211405 -0.24812968195536544425 -0.25097284543525805178 -0.21574407955105037726 -0.18909730725132267715 -0.082491273597473505075 -0.0028394665890066790592 0.093595868467495846321 0.15255133047669511281 0.047565657254630223927 -0.0045760762199708046941 -0.13749822585747978332 -0.13273512185063601754 0.0067731644310998866121 0.082552628448547382689 0.1880166979432713048 0.10116694953951786695 0.052336160907966715328 -0.06153538059394358245 -0.170439490111939429 -0.22277790371856562301 -0.21442455077385844109 -0.15135552966859791568 -0.10042306848189014312 -0.047687103061350183397 -0.0029819357181994142307 -0.0050406430974149736904 0.036615715176494048611 0.024735525266504125586 0.014567646323442654671 0.019995776425377188162 0.022076894086614579776 0.027168337517866122249 0.022097358540712531277 0.01674367930015119646];

% Layer 2
b2 = 12.617607470296000827;
LW2_1 = [8.6347669089107093043 -12.198451441560010267 17.411773580439923848 0.65947566998013784634 -0.010352265822498008321 1.7581782695306247266 -1.0392935257240734082];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.0250002865940443;
y1_step1.xoffset = 5.00082289650488;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
